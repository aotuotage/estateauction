{"ast":null,"code":"import _classCallCheck from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/mac/Desktop/react/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mac/Desktop/react/my-app/src/component/problem.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Qs from 'qs';\nimport Popup from './popup';\n\nvar Problem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Problem, _Component);\n\n  function Problem() {\n    var _this2;\n\n    _classCallCheck(this, Problem);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(Problem).call(this));\n    _this2.handleChange = _this2.handleChange.bind(_assertThisInitialized(_this2));\n    _this2.qutSubmit = _this2.qutSubmit.bind(_assertThisInitialized(_this2));\n    _this2.state = {\n      text: \"\",\n      msg: \"\",\n      display: \"none\"\n    };\n    return _this2;\n  }\n\n  _createClass(Problem, [{\n    key: \"qutSubmit\",\n    value: function qutSubmit(e) {\n      if (sessionStorage.getItem(\"data\") == \"\") {\n        this.props.history.push(\"/login\");\n        return false;\n      }\n\n      if (this.state.text === \"\") {\n        alert(\"不能为空\");\n        return false;\n      }\n\n      var uname = JSON.parse(sessionStorage.getItem(\"data\"));\n      var data = Qs.stringify({\n        'text': this.state.text,\n        'username': uname.userInfo.uid\n      });\n\n      var _this = this;\n\n      axios({\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        url: 'http://localhost:3000/problem',\n        data: data\n      }).then(function (data) {\n        if (data.data.states === 200) {\n          console.log(data.data.msg);\n\n          _this.setState({\n            msg: data.data.msg,\n            display: \"flex\"\n          });\n        } else {\n          console.log(data);\n        }\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var _this = this;\n\n      _this.setState({\n        text: e.target.value\n      });\n    }\n  }, {\n    key: \"handleDisplay\",\n    value: function handleDisplay(e) {\n      this.setState({\n        display: \"none\"\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"form\", {\n        action: \"javascript:;\",\n        method: \"get\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        placeholder: \"\\u8BF7\\u586B\\u5165\\u95EE\\u9898\\u8BE6\\u60C5\\uFF0C\\u6211\\u4EEC\\u4F1A\\u7B2C\\u4E00\\u65F6\\u95F4\\u8054\\u7CFB\\u60A8\\uFF01\",\n        onChange: this.handleChange,\n        value: this.state.text,\n        className: \"input_text\",\n        type: \"text\",\n        name: \"qutext\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        onClick: this.qutSubmit,\n        type: \"submit\",\n        className: \"subbtn\",\n        value: \"\\u63D0\\u4EA4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(Popup, {\n        msg: this.state.msg,\n        handleDisplay: this.handleDisplay.bind(this),\n        display: this.state.display,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Problem;\n}(Component);\n\nexport default Problem;","map":{"version":3,"sources":["/Users/mac/Desktop/react/my-app/src/component/problem.js"],"names":["React","Component","axios","Qs","Popup","Problem","handleChange","bind","qutSubmit","state","text","msg","display","e","sessionStorage","getItem","props","history","push","alert","uname","JSON","parse","data","stringify","userInfo","uid","_this","method","headers","url","then","states","console","log","setState","target","value","handleDisplay"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Qs from 'qs';\nimport Popup from './popup';\n\nclass Problem extends Component{\n    constructor(){\n        super(); \n        this.handleChange = this.handleChange.bind(this);\n        this.qutSubmit = this.qutSubmit.bind(this);\n        this.state = {\n            text: \"\",\n            msg:\"\",\n            display:\"none\"\n        }\n    }\n    qutSubmit(e){\n        if(sessionStorage.getItem(\"data\")==\"\"){\n            this.props.history.push(\"/login\");\n            return false  \n        }\n        if(this.state.text === \"\"){\n            alert(\"不能为空\")\n           return false     \n        }\n        let uname = JSON.parse(sessionStorage.getItem(\"data\"))\n        let data = Qs.stringify({\n            'text':this.state.text,\n            'username':uname.userInfo.uid\n        });\n        let _this =this;\n        axios({\n            method: 'POST',\n            headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},\n            url: 'http://localhost:3000/problem',\n            data: data\n        })\n        .then( data => {\n            if(data.data.states === 200){\n                console.log(data.data.msg)\n                _this.setState({\n                    msg:data.data.msg,\n                    display:\"flex\"\n                })\n            }else{\n                console.log(data)\n            }\n        })\n    }\n    handleChange(e){\n        let _this = this;\n        _this.setState ({\n            text: e.target.value\n        });\n    }\n    handleDisplay(e){\n        this.setState({\n            display:\"none\"\n        })\n    }\n    render() {\n      return  <form action=\"javascript:;\" method=\"get\">\n      <textarea placeholder=\"请填入问题详情，我们会第一时间联系您！\" onChange={this.handleChange} value={this.state.text} className=\"input_text\" type=\"text\" name=\"qutext\">\n      </textarea>\n      <input onClick={this.qutSubmit} type=\"submit\" className=\"subbtn\" value=\"提交\"/>\n      <Popup msg={this.state.msg} handleDisplay={this.handleDisplay.bind(this)} display={this.state.display}></Popup>\n    </form>\n    }\n}\n\nexport default Problem;"]},"metadata":{},"sourceType":"module"}